function showModal(e){var t=document.querySelector(".modal--"+e),a=document.querySelector(".modal__backdrop--"+e),l=document.querySelector(".modal__scroll-window--"+e);body.style.overflow="hidden",body.style.paddingLeft="0",t.style.visibility="visible",a.style.opacity="0.8",a.style.filter="alpha(opacity=0.8)",l.style.WebkitTransform="scale(1,1)",l.style.msTransform="scale(1,1)",l.style.transform="scale(1,1)"}function closeModal(){for(body.style.overflow="visible",body.style.paddingLeft="20px",i=0;i<modals.length;i++)backdrops[i].style.opacity="0",backdrops[i].style.filter="alpha(opacity=0)",modals[i].style.visibility="hidden",scrollWindows[i].style.WebkitTransform="scale(0,0)",scrollWindows[i].style.msTransform="scale(0,0)",scrollWindows[i].style.transform="scale(0,0)"}function create(){var e=document.querySelector(".form__input--marca-create"),t=document.querySelector(".form__input--modelo-create"),a=document.querySelector(".form__input--ano-create"),l=document.querySelector(".form__error--create"),o="";if(""!=e.value&&""!=t.value&&""!=a.value)if(parseInt(a.value)<1950||parseInt(a.value)>2999)o+="Ano inválido<br>";else{var r=new XMLHttpRequest;r.onreadystatechange=function(){4==this.readyState&&200==this.status&&(readAll(),e.value="",t.value="",a.value="",o="",l.innerHTML="",l.style.visibility="hidden",l.style.WebkitTransform="scale(0,0)",l.style.msTransform="scale(0,0)",l.style.transform="scale(0,0)",closeModal())};var s="api.php?";s+="method=create&",s+="marca="+e.value+"&",s+="modelo="+t.value+"&",s+="ano="+a.value,r.open("POST",s,!0),r.send()}else o+="Você precisa preencher todos os campos!<br>";""!=o&&(l.innerHTML=o,l.style.visibility="visible",l.style.WebkitTransform="scale(1,1)",l.style.msTransform="scale(1,1)",l.style.transform="scale(1,1)")}function readAll(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e,t=JSON.parse(this.responseText).carros,a=document.querySelector(".carros-lista"),l=document.createElement("H1");for(a.innerHTML="",0==t.length?(e=document.createTextNode("Nenhum carro registrado até o momento"),l.setAttribute("class","carros-lista__element carros-lista__title carros-lista__title--blank col")):(e=document.createTextNode("Carros"),l.setAttribute("class","carros-lista__element carros-lista__title col")),l.appendChild(e),a.appendChild(l),i=0;i<t.length;i++){var o=document.createElement("LI"),r=document.createElement("INPUT"),s=document.createElement("P"),n=document.createElement("P"),c=document.createElement("P"),d=document.createElement("DIV"),u=document.createElement("BUTTON"),m=document.createElement("BUTTON"),p=document.createTextNode("Marca: "+t[i].marca),_=document.createTextNode("Modelo: "+t[i].modelo),y=document.createTextNode("Ano: "+t[i].ano),f=document.createTextNode("Editar"),v=document.createTextNode("Deletar");s.appendChild(p),n.appendChild(_),c.appendChild(y),u.appendChild(f),m.appendChild(v),r.type="hidden",r.value=t[i].id,u.setAttribute("onclick","edit('"+t[i].id+"', '"+t[i].marca+"', '"+t[i].modelo+"', '"+t[i].ano+"')"),m.setAttribute("onclick","del("+t[i].id+")"),o.appendChild(r),o.appendChild(s),o.appendChild(n),o.appendChild(c),o.appendChild(d),d.appendChild(u),d.appendChild(m),i==t.length-1?o.setAttribute("class","carros-lista__element carros-lista__element--last col"):o.setAttribute("class","carros-lista__element col"),r.setAttribute("class","form__input"),s.setAttribute("class","carros-lista__element__text col"),n.setAttribute("class","carros-lista__element__text col"),c.setAttribute("class","carros-lista__element__text col"),d.setAttribute("class","col carros-lista__element__buttons"),u.setAttribute("class","form__button carros-lista__element__button carros-lista__element__button--first"),m.setAttribute("class","form__button-red carros-lista__element__button"),a.appendChild(o)}}};var t="api.php?";t+="method=read-all",e.open("GET",t,!0),e.send()}function edit(e,t,a,l){var o=document.querySelector(".form__input--id-edit"),r=document.querySelector(".form__input--marca-edit"),s=document.querySelector(".form__input--modelo-edit"),i=document.querySelector(".form__input--ano-edit");o.value=e,r.value=t,s.value=a,i.value=l,showModal("edit")}function update(){var e=document.querySelector(".form__input--id-edit"),t=document.querySelector(".form__input--marca-edit"),a=document.querySelector(".form__input--modelo-edit"),l=document.querySelector(".form__input--ano-edit"),o=document.querySelector(".form__error--edit"),r="";if(""!=e.value&&""!=t.value&&""!=a.value&&""!=l.value)if(parseInt(l.value)<1950||parseInt(l.value)>2999)r+="Ano inválido<br>";else{var s=new XMLHttpRequest;s.onreadystatechange=function(){4==this.readyState&&200==this.status&&(readAll(),t.value="",a.value="",l.value="",r="",o.innerHTML="",o.style.visibility="hidden",o.style.WebkitTransform="scale(0,0)",o.style.msTransform="scale(0,0)",o.style.transform="scale(0,0)",closeModal())};var i="api.php?";i+="method=update&",i+="id="+e.value+"&",i+="marca="+t.value+"&",i+="modelo="+a.value+"&",i+="ano="+l.value,s.open("POST",i,!0),s.send()}else r+="Você precisa preencher todos os campos!<br>";""!=r&&(o.innerHTML=r,o.style.visibility="visible",o.style.WebkitTransform="scale(1,1)",o.style.msTransform="scale(1,1)",o.style.transform="scale(1,1)")}function del(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&readAll()};var a="api.php?";a+="method=delete&",a+="id="+e,t.open("POST",a,!0),t.send()}var body=document.querySelector("body"),modals=document.querySelectorAll(".modal"),backdrops=document.querySelectorAll(".modal__backdrop"),scrollWindows=document.querySelectorAll(".modal__scroll-window");readAll();