{"version":3,"sources":["components/HomePage.js","components/CarsList.js","appDispatcher.js","actions/actionTypes.js","stores/carStore.js","api/apiUtils.js","api/carApi.js","actions/carActions.js","components/CarsPage.js","components/NotFoundPage.js","components/common/TextInput.js","components/common/SelectInput.js","components/CarForm.js","actions/brandsActions.js","api/brandApi.js","components/ManageCarPage.js","components/common/Header.js","components/App.js","index.js"],"names":["HomePage","className","CarsList","props","cars","map","car","to","id","title","year","brandName","type","onClick","onDelete","prototype","PropTypes","arrayOf","shape","number","isRequired","string","brandId","func","dispatcher","Dispatcher","actionTypes","CREATE_CAR","LOAD_CARS","UPDATE_CAR","DELETE_CAR","LOAD_BRANDS","CHANGE_EVENT","_cars","_brands","store","callback","this","on","removeListener","emit","find","parseInt","EventEmitter","register","action","actionType","push","emitChange","filter","carID","brands","handleResponse","response","a","ok","json","status","error","toast","message","Error","handleError","console","baseUrl","process","saveCar","fetch","method","headers","body","JSON","stringify","then","catch","carApi","savedCar","dispatch","data","loadCars","deleteCar","carId","CarsPage","useState","getCars","setCars","onChange","useEffect","addChangeListener","length","removeChangeListener","success","NotFoundPage","match","path","window","location","replace","TextInput","wrapperClass","htmlFor","label","name","value","defaultProps","SelectInput","defaultOption","options","option","text","object","CarForm","onSubmit","errors","brand","loadBrands","ManageCarPage","setErrors","setCar","getBrands","setBrands","params","carActions","getCarById","brandsActions","target","event","preventDefault","_erros","Object","keys","formIsValid","history","_error","Header","activeStyle","color","exact","activeClassName","App","autoClose","hideProgressBar","component","render","document","getElementById"],"mappings":"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","file":"static/js/main.f7687e1e.chunk.js","sourcesContent":["import React from \"react\"\n\nconst HomePage = () => {\n  return (\n    <div className=\"jumbotron\">\n      <h1>Dashboard Carros</h1>\n      <p>Painel para editar, criar e deletar carros</p>\n    </div>\n  )\n}\n\nexport default HomePage\n","import React from \"react\"\nimport { Link } from \"react-router-dom\"\nimport PropTypes from \"prop-types\";\n\nconst CarsList = (props) => {\n  return (\n    <table className=\"table\">\n      <thead>\n        <tr>\n          <th>Modelo</th>\n          <th>Ano</th>\n          <th>Marca</th>\n          <th>Remover</th>\n        </tr>\n      </thead>\n      <tbody>\n        {props.cars.map(car => {\n          return (\n            <tr key={car.id}>\n              <td><Link to={`/carro/${car.id}`}>{car.title}</Link></td>\n              <td>{car.year}</td>\n              <td>{car.brandName}</td>\n              <td><button type=\"button\" className=\"btn btn-danger\" onClick={() => props.onDelete(car.id)}>X</button></td>\n            </tr>\n          )\n        })}\n      </tbody>\n    </table>\n  )\n}\n\nCarsList.prototype = {\n  cars: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      title: PropTypes.string.isRequired,\n      year: PropTypes.number.isRequired,\n      brandId: PropTypes.number.isRequired,\n      brandName: PropTypes.string.isRequired\n    })\n  ).isRequired,\n  onDelete: PropTypes.func.isRequired\n}\n\nexport default CarsList\n","import { Dispatcher } from \"flux\"\nconst dispatcher = new Dispatcher()\nexport default dispatcher\n","const actionTypes = {\n  CREATE_CAR: \"CREATE_CAR\",\n  LOAD_CARS: \"LOAD_CARS\",\n  UPDATE_CAR: \"UPDATE_CAR\",\n  DELETE_CAR: \"DELETE_CAR\",\n  LOAD_BRANDS: \"LOAD_BRANDS\",\n}\n\nexport default actionTypes\n","import { EventEmitter } from \"events\"\nimport dispatcher from \"../appDispatcher\"\nimport actionTypes from \"../actions/actionTypes\"\n\nconst CHANGE_EVENT = 'change'\nlet _cars = []\nlet _brands = []\n\nclass carStore extends EventEmitter {\n  addChangeListener(callback) {\n    this.on(CHANGE_EVENT, callback)\n  }\n\n  removeChangeListener(callback) {\n    this.removeListener(CHANGE_EVENT, callback)\n  }\n\n  emitChange() {\n    this.emit(CHANGE_EVENT)\n  }\n\n  getCars() {\n    return _cars\n  }\n\n  getCarById(id) {\n    return _cars.find(car => car.id === parseInt(id, 10))\n  }\n\n  getBrands() {\n    return _brands\n  }\n}\n\nconst store = new carStore()\n\ndispatcher.register(action => {\n  switch (action.actionType) {\n    case actionTypes.CREATE_CAR:\n      _cars.push(action.car)\n      store.emitChange()\n      break;\n\n    case actionTypes.LOAD_CARS:\n      _cars = action.cars\n      store.emitChange()\n      break;\n\n    case actionTypes.UPDATE_CAR:\n      _cars = _cars.map(car => car.id === action.car.id ? action.car : car)\n      store.emitChange()\n      break;\n\n    case actionTypes.DELETE_CAR:\n      _cars = _cars.filter(car => car.id !== parseInt(action.carID, 10))\n      store.emitChange()\n      break;\n\n    case actionTypes.LOAD_BRANDS:\n      _brands = action.brands\n      store.emitChange()\n      break;\n\n    default:\n      break;\n  }\n})\n\nexport default store\n","import { toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\nexport async function handleResponse(response) {\n  if (response.ok) return response.json();\n  if (response.status !== 200) {\n    const error = await response.json();\n    toast.error(error.message)\n    throw new Error(error.message);\n  }\n  throw new Error(\"Network response was not ok.\");\n}\n\nexport function handleError(error) {\n  // eslint-disable-next-line no-console\n  console.error(\"API call failed. \" + error);\n  throw error;\n}\n","import { handleResponse, handleError } from \"./apiUtils\";\nconst baseUrl = process.env.REACT_APP_API_URL + \"/api/v1/carros/\";\n\nexport function getCars() {\n  return fetch(baseUrl)\n    .then(handleResponse)\n    .catch(handleError);\n}\n\nexport function getCarById(id) {\n  return fetch(baseUrl + id)\n    .then(response => {\n      if (!response.ok) throw new Error(\"Network response was not ok.\");\n      return response.json().then(cars => {\n        if (cars.data.length !== 1) throw new Error(\"Car not found: \" + id);\n        return cars.data; // should only find one car for a given id, so return it.\n      });\n    })\n    .catch(handleError);\n}\n\nexport function saveCar(car) {\n  return fetch(baseUrl + (car.id || \"\"), {\n    method: car.id ? \"PUT\" : \"POST\", // POST for create, PUT to update when id already exists.\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({\n      ...car,\n      // Parse year and brandId to a number (in case it was sent as a string).\n      year: parseInt(car.year, 10),\n      brandId: parseInt(car.brandId, 10)\n    })\n  })\n    .then(handleResponse)\n    .catch(handleError);\n}\n\nexport function deleteCar(carId) {\n  return fetch(baseUrl + carId, { method: \"DELETE\" })\n    .then(handleResponse)\n    .catch(handleError);\n}\n","import dispatcher from \"../appDispatcher\"\nimport * as carApi from \"../api/carApi\"\nimport actionTypes from \"./actionTypes\"\n\nexport function saveCar(car) {\n  return carApi\n    .saveCar(car)\n    .then(savedCar => {\n      dispatcher.dispatch({\n        actionType: car.id ? actionTypes.UPDATE_CAR : actionTypes.CREATE_CAR,\n        car: savedCar.data\n      })\n    })\n}\n\nexport function loadCars() {\n  return carApi\n    .getCars()\n    .then(cars => {\n      dispatcher.dispatch({\n        actionType: actionTypes.LOAD_CARS,\n        cars: cars.data\n      })\n    })\n}\n\nexport function deleteCar(carID) {\n  return carApi\n    .deleteCar(carID)\n    .then(() => {\n      dispatcher.dispatch({\n        actionType: actionTypes.DELETE_CAR,\n        carID\n      })\n    })\n}\n","import React, { useEffect, useState } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport { toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\n// * * * * * Components * * * * *\nimport CarsList from \"./CarsList\"\n// * * * * * Store * * * * *\nimport store from \"../stores/carStore\"\nimport { loadCars, deleteCar } from \"../actions/carActions\"\n\nconst CarsPage = () => {\n  const [cars, setCars] = useState(store.getCars())\n\n  useEffect(() => {\n    store.addChangeListener(onChange)\n    if (cars.length === 0) loadCars()\n    return () => store.removeChangeListener(onChange)\n  },[cars.length])\n\n  function onChange() {\n    setCars(store.getCars())\n  }\n\n  function handleDelete(carID) {\n    deleteCar(carID).then(() => toast.success('Carro deletado!'))\n  }\n\n  return (\n    <div className=\"py-5\">\n      <div className=\"d-flex justify-content-md-between flex-column flex-md-row\">\n        <h2>Listagem de carros</h2>\n        <Link to=\"/carro\" className=\"btn btn-primary mb-3\">Adicionar carro</Link>\n      </div>\n      <CarsList cars={cars} onDelete={handleDelete}/>\n    </div>\n  )\n}\n\nexport default CarsPage\n","import React from \"react\"\nimport { Link } from \"react-router-dom\";\n\nconst NotFoundPage = (props) => {\n  if (props.match.path !== \"/404\") {\n    window.location.replace(\"/404\");\n  }\n\n  return (\n    <div className=\"py-5\">\n      <h2>Página não encontrada</h2>\n      <p className=\"mt-5\"><Link to=\"/\" className=\"btn btn-primary\">Voltar para home</Link></p>\n    </div>\n  )\n}\n\nexport default NotFoundPage\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nconst TextInput = (props) => {\n  let wrapperClass = \"form-group\"\n  if (props.error.length > 0) {\n    wrapperClass += \" has-error\"\n  }\n\n  return (\n    <div className={wrapperClass}>\n      <label htmlFor={props.id}>{props.label}</label>\n      <div className=\"field\">\n        <input type=\"text\" id={props.id} name={props.name} className=\"form-control\" value={props.value} onChange={props.onChange}/>\n      </div>\n      {props.error && <div className=\"alert alert-danger\">{props.error}</div>}\n    </div>\n  )\n}\n\nTextInput.prototype = {\n  id      : PropTypes.string.isRequired,\n  name    : PropTypes.string.isRequired,\n  label   : PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  value   : PropTypes.string,\n  error   : PropTypes.string,\n}\n\nTextInput.defaultProps = { error: \"\" }\n\nexport default TextInput\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nconst SelectInput = (props) => {\n  let wrapperClass = \"form-group\"\n  if (props.error.length > 0) {\n    wrapperClass += \" has-error\"\n  }\n\n  return (\n    <div className={wrapperClass}>\n      <label htmlFor={props.id}>{props.label}</label>\n      <div className=\"field\">\n        <select name={props.name} value={props.value} onChange={props.onChange} className=\"form-control\">\n          <option value=\"\">{props.defaultOption}</option>\n          {props.options.map(option => <option key={option.value} value={option.value}>{option.text}</option>)}\n        </select>\n      </div>\n      {props.error && <div className=\"alert alert-danger\">{props.error}</div>}\n    </div>\n  )\n}\n\nSelectInput.prototype = {\n  name         : PropTypes.string.isRequired,\n  label        : PropTypes.string.isRequired,\n  onChange     : PropTypes.func.isRequired,\n  value        : PropTypes.string,\n  error        : PropTypes.string,\n  defaultOption: PropTypes.string,\n  options      : PropTypes.arrayOf(PropTypes.object)\n}\n\nSelectInput.defaultProps = { error: \"\" }\n\nexport default SelectInput\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport TextInput from \"./common/TextInput\"\nimport SelectInput from \"./common/SelectInput\"\n\nconst CarForm = (props) => {\n  return (\n    <form onSubmit={props.onSubmit}>\n      <TextInput id=\"title\" name=\"title\" label=\"Modelo\" value={props.car.title} onChange={props.onChange} error={props.errors.title}/>\n\n      <TextInput id=\"year\" name=\"year\" label=\"Ano\" value={props.car.year} onChange={props.onChange} error={props.errors.year} />\n\n      {/* <div className=\"form-group\">\n        <label htmlFor=\"brand\">Marca</label>\n        <div className=\"field\">\n          <select name=\"brandId\" id=\"brand\" className=\"form-control\" value={props.car.brandId || \"\"} onChange={props.onChange}>\n            <option value=\"\"/>\n            <option value=\"1\">Cory House</option>\n            <option value=\"2\">Scott Allen</option>\n          </select>\n        </div>\n        {props.errors.brandId && <div className=\"alert alert-danger\">{props.errors.brandId}</div>}\n      </div> */}\n\n      <SelectInput name=\"brandId\" label=\"Marca\" value={props.car.brandId || \"\"} defaultOption=\"Selecione uma marca\" options={props.brands.map(brand => ({ value: brand.id, text: brand.name }))} onChange={props.onChange} error={props.errors.brandId} />\n\n      <input type=\"submit\" value=\"Salvar\" className=\"btn btn-primary\"/>\n    </form>\n  )\n}\n\nCarForm.prototype = {\n  car  : PropTypes.object.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  errors  : PropTypes.object.isRequired\n}\n\nexport default CarForm\n","import dispatcher from \"../appDispatcher\"\nimport * as brandApi from \"../api/brandApi\"\nimport actionTypes from \"./actionTypes\"\n\nexport function loadBrands() {\n  return brandApi\n    .getBrands()\n    .then(brands => {\n      dispatcher.dispatch({\n        actionType: actionTypes.LOAD_BRANDS,\n        brands: brands.data\n      })\n    })\n}\n","import { handleResponse, handleError } from \"./apiUtils\";\nconst baseUrl = process.env.REACT_APP_API_URL + \"/api/v1/marcas/\";\n\nexport function getBrands() {\n  return fetch(baseUrl)\n    .then(handleResponse)\n    .catch(handleError);\n}\n","import React, { useState, useEffect } from \"react\"\nimport { toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\n// * * * * * Components * * * * *\nimport CarForm from \"./CarForm\"\n// * * * * * Store * * * * *\nimport store from \"../stores/carStore\"\nimport * as carActions from \"../actions/carActions\"\nimport * as brandsActions from \"../actions/brandsActions\"\n\nconst ManageCarPage = (props) => {\n  const [errors, setErrors]   = useState({})\n  const [cars, setCars] = useState(store.getCars())\n  const [car, setCar]   = useState({\n    id      : null,\n    title   : '',\n    year    : '',\n    brandId : null\n  })\n  const [brands, setBrands] = useState(store.getBrands())\n\n  function onChange() {\n    setCars(store.getCars())\n    setBrands(store.getBrands())\n  }\n\n  useEffect(() => {\n    store.addChangeListener(onChange)\n    const id = props.match.params.id\n\n    if (cars.length === 0) {\n      carActions.loadCars()\n    } else if (id) {\n      setCar(store.getCarById(id))\n    }\n\n    if (brands.length === 0) {\n      brandsActions.loadBrands()\n    }\n\n    return () => store.removeChangeListener(onChange)\n  }, [cars.length, brands.length, props.match.params.id])\n\n  function handleChange({target}) {\n    setCar({...car, [target.name]: target.value})\n  }\n\n  function formIsValid() {\n    const _erros = {}\n\n    if (!car.title) _erros.title     = \"Modelo é obrigatório\"\n    if (!car.year) _erros.year       = \"Ano é obrigatório\"\n    if (!car.brandId) _erros.brandId = \"Marca é obrigatório\"\n\n    setErrors(_erros)\n\n    return Object.keys(_erros).length === 0\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    if (!formIsValid()) return\n\n    carActions\n      .saveCar(car)\n      .then(() => {\n        props.history.push('/carros')\n        toast.success('Carro salvo!')\n      })\n      .catch(_error => toast.success(_error))\n  }\n\n  return (\n    <div className=\"py-5\">\n      <h2>{car.id ? \"Editar\" : \"Adicionar\"} carro</h2>\n      <CarForm car={car} brands={brands} errors={errors} onChange={handleChange} onSubmit={handleSubmit}/>\n    </div>\n  )\n}\n\nexport default ManageCarPage\n","import React from \"react\"\nimport { NavLink } from \"react-router-dom\";\n\nconst Header = () => {\n  const activeStyle = { color: \"orange\" }\n  return (\n    <nav>\n      <NavLink exact to=\"/\" activeClassName=\"active\" activeStyle={activeStyle}>Home</NavLink>{\" | \"}\n      <NavLink to=\"/carros\" activeClassName=\"active\" activeStyle={activeStyle}>Carros</NavLink>{\" | \"}\n    </nav>\n  )\n}\n\nexport default Header\n","import React from \"react\"\nimport { Route, Switch, Redirect } from \"react-router-dom\"\nimport { ToastContainer } from 'react-toastify'\n\n// * * * * * Page Components * * * * *\nimport HomePage from \"./HomePage\"\nimport CarsPage from \"./CarsPage\"\nimport NotFoundPage from \"./NotFoundPage\"\nimport ManageCarPage from \"./ManageCarPage\"\n// * * * * * Common Components * * * * *\nimport Header from \"./common/Header\"\n\nconst App = () => {\n  return (\n    <div className=\"container\">\n      <ToastContainer autoClose={3000} hideProgressBar />\n      <Header />\n      <Switch>\n        <Route exact path=\"/\" component={HomePage} />\n        <Route path=\"/carros\" component={CarsPage} />\n        <Route path=\"/carro/:id\" component={ManageCarPage} />\n        <Route path=\"/carro\" component={ManageCarPage} />\n        <Route path=\"/404\" component={NotFoundPage} status={404} />\n        <Route component={NotFoundPage} status={404} />\n        {/* <Redirect from=\"*\" to=\"/404\" status={404} /> */}\n      </Switch>\n    </div>\n  )\n}\n\nexport default App\n","import \"bootstrap/dist/css/bootstrap.min.css\"\nimport React from 'react'\nimport { render } from 'react-dom'\nimport App from \"./components/App\"\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nrender(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}